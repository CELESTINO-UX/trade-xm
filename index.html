<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trade XM - Responsive AI Trading Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <style>
        /* ===== RESPONSIVE DESIGN SYSTEM ===== */
        :root {
            --primary: #00d4ff;
            --success: #00ff88;
            --danger: #ff3366;
            --warning: #ff9933;
            --dark-bg: #0a0e17;
            --dark-card: rgba(20, 25, 40, 0.9);
            --dark-border: rgba(255, 255, 255, 0.1);
            --light-bg: #f5f7fa;
            --light-card: rgba(255, 255, 255, 0.95);
            --light-border: rgba(0, 0, 0, 0.1);
            --text-dark: #333;
            --text-light: #fff;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            
            /* Responsive breakpoints */
            --screen-xs: 480px;
            --screen-sm: 768px;
            --screen-md: 992px;
            --screen-lg: 1200px;
            --screen-xl: 1400px;
        }

        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: var(--dark-bg);
            overflow-x: hidden;
            transition: background-color 0.3s ease;
        }

        body.light-mode {
            background-color: var(--light-bg);
            color: var(--text-dark);
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-light);
            transition: color 0.3s ease;
        }

        body.light-mode h1,
        body.light-mode h2,
        body.light-mode h3,
        body.light-mode h4,
        body.light-mode h5,
        body.light-mode h6 {
            color: var(--text-dark);
        }

        .container {
            width: 100%;
            max-width: var(--screen-xl);
            margin: 0 auto;
            padding: 0 15px;
        }

        section {
            padding: 60px 0;
        }

        @media (max-width: 768px) {
            section {
                padding: 40px 0;
            }
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary), #0088ff);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 500;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 212, 255, 0.4);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
        }

        .btn-lg {
            padding: 16px 32px;
            font-size: 18px;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #00cc66);
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #cc0044);
            box-shadow: 0 4px 15px rgba(255, 51, 102, 0.3);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        /* Header - Responsive */
        header {
            background-color: rgba(10, 14, 23, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--dark-border);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        body.light-mode header {
            background-color: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid var(--light-border);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
        }

        .logo {
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            font-weight: 700;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            white-space: nowrap;
        }

        body.light-mode .logo {
            color: var(--text-dark);
        }

        .logo span {
            background: linear-gradient(135deg, var(--primary), #0088ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo i {
            margin-right: 8px;
            font-size: 24px;
            color: var(--primary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .demo-balance-display {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-sm);
            color: white;
            font-weight: 500;
            white-space: nowrap;
        }

        body.light-mode .demo-balance-display {
            background: rgba(0, 0, 0, 0.05);
            color: var(--text-dark);
        }

        .demo-balance-display i {
            margin-right: 5px;
            color: var(--primary);
        }

        /* Navigation - Responsive */
        .nav-links {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        .nav-links a {
            text-decoration: none;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            font-size: 16px;
            transition: color 0.3s;
            white-space: nowrap;
        }

        body.light-mode .nav-links a {
            color: rgba(0, 0, 0, 0.8);
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            color: var(--primary);
            cursor: pointer;
            padding: 8px;
        }

        /* Trading Platform Layout - Responsive Grid */
        .platform-container {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 20px;
            margin-top: 80px;
            padding: 20px;
            min-height: calc(100vh - 80px);
        }

        /* Mobile-first breakpoints */
        @media (max-width: 1200px) {
            .platform-container {
                grid-template-columns: 250px 1fr 300px;
            }
        }

        @media (max-width: 992px) {
            .platform-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .market-watch, .trading-terminal {
                max-height: 400px;
                overflow-y: auto;
            }
        }

        @media (max-width: 768px) {
            .platform-container {
                padding: 10px;
                margin-top: 70px;
                gap: 10px;
            }
            
            .chart-container {
                min-height: 300px;
            }
        }

        /* Left Panel - Market Watch */
        .market-watch {
            background: var(--dark-card);
            border-radius: var(--radius-md);
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--dark-border);
            height: fit-content;
            transition: all 0.3s ease;
        }

        body.light-mode .market-watch {
            background: var(--light-card);
            border: 1px solid var(--light-border);
        }

        .market-watch h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 18px;
            display: flex;
            align-items: center;
        }

        .market-watch h3 i {
            margin-right: 10px;
        }

        /* Market List - Responsive */
        .market-list {
            list-style: none;
        }

        .market-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: background 0.3s;
        }

        body.light-mode .market-item {
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .market-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .market-item.active {
            background: rgba(0, 212, 255, 0.1);
            border-left: 3px solid var(--primary);
        }

        .pair-info {
            display: flex;
            flex-direction: column;
            min-width: 0;
            flex: 1;
        }

        .pair-name {
            font-weight: 600;
            color: var(--text-light);
            font-size: 15px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        body.light-mode .pair-name {
            color: var(--text-dark);
        }

        .pair-description {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        body.light-mode .pair-description {
            color: rgba(0, 0, 0, 0.5);
        }

        .pair-price {
            text-align: right;
            margin-left: 10px;
            min-width: 80px;
        }

        .current-price {
            font-weight: 700;
            font-size: 16px;
            color: var(--text-light);
        }

        body.light-mode .current-price {
            color: var(--text-dark);
        }

        .price-change {
            font-size: 11px;
            font-weight: 600;
        }

        .price-change.positive {
            color: var(--success);
        }

        .price-change.negative {
            color: var(--danger);
        }

        /* Feature Tabs - Responsive */
        .feature-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--dark-border);
            padding-bottom: 10px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .feature-tabs::-webkit-scrollbar {
            display: none;
        }

        .tab-btn {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 14px;
        }

        body.light-mode .tab-btn {
            color: rgba(0, 0, 0, 0.6);
        }

        .tab-btn:hover {
            background: rgba(0, 212, 255, 0.1);
            color: white;
        }

        body.light-mode .tab-btn:hover {
            color: var(--text-dark);
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Center Panel - Trading Chart */
        .trading-chart {
            background: var(--dark-card);
            border-radius: var(--radius-md);
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--dark-border);
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        body.light-mode .trading-chart {
            background: var(--light-card);
            border: 1px solid var(--light-border);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .selected-pair {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .selected-pair .pair-name {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-light);
            margin-right: 15px;
        }

        body.light-mode .selected-pair .pair-name {
            color: var(--text-dark);
        }

        .price-display {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary);
        }

        /* Chart Tools - Responsive */
        .chart-toolbar {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius-sm);
            border: 1px solid var(--dark-border);
            flex-wrap: wrap;
        }

        body.light-mode .chart-toolbar {
            background: rgba(0, 0, 0, 0.03);
            border: 1px solid var(--light-border);
        }

        .tool-btn {
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--dark-border);
            border-radius: 6px;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        body.light-mode .tool-btn {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid var(--light-border);
            color: rgba(0, 0, 0, 0.8);
        }

        .tool-btn:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--primary);
            color: white;
        }

        .tool-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Timeframe Selector - Responsive */
        .timeframe-selector {
            display: flex;
            gap: 8px;
            background: rgba(255, 255, 255, 0.05);
            padding: 5px;
            border-radius: var(--radius-sm);
            flex-wrap: wrap;
        }

        body.light-mode .timeframe-selector {
            background: rgba(0, 0, 0, 0.05);
        }

        .timeframe-btn {
            padding: 6px 12px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
            min-width: 40px;
            text-align: center;
        }

        body.light-mode .timeframe-btn {
            color: rgba(0, 0, 0, 0.6);
        }

        .timeframe-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Chart Container */
        .chart-container {
            flex: 1;
            position: relative;
            background: rgba(10, 14, 23, 0.5);
            border-radius: var(--radius-sm);
            padding: 15px;
            margin-bottom: 15px;
            min-height: 400px;
        }

        body.light-mode .chart-container {
            background: rgba(245, 247, 250, 0.5);
        }

        @media (max-width: 768px) {
            .chart-container {
                min-height: 300px;
                padding: 10px;
            }
            
            .chart-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .timeframe-selector {
                justify-content: center;
            }
            
            .chart-toolbar {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .chart-container {
                min-height: 250px;
            }
            
            .selected-pair {
                justify-content: center;
                text-align: center;
            }
            
            .timeframe-btn {
                padding: 5px 8px;
                min-width: 35px;
                font-size: 11px;
            }
        }

        /* Multi-Chart View - Responsive */
        .multi-chart-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        @media (max-width: 768px) {
            .multi-chart-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .multi-chart-container {
                grid-template-columns: 1fr;
            }
        }

        .mini-chart {
            background: rgba(20, 25, 40, 0.7);
            border-radius: var(--radius-sm);
            padding: 10px;
            cursor: pointer;
            border: 1px solid var(--dark-border);
            transition: all 0.3s ease;
        }

        body.light-mode .mini-chart {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid var(--light-border);
        }

        /* Chart Footer */
        .chart-footer {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat {
            text-align: center;
            min-width: 100px;
        }

        .stat-label {
            display: block;
            color: rgba(255, 255, 255, 0.6);
            font-size: 11px;
            margin-bottom: 3px;
        }

        body.light-mode .stat-label {
            color: rgba(0, 0, 0, 0.6);
        }

        .stat-value {
            font-weight: 600;
            color: var(--text-light);
            font-size: 13px;
        }

        body.light-mode .stat-value {
            color: var(--text-dark);
        }

        /* Right Panel - Trading Terminal */
        .trading-terminal {
            background: var(--dark-card);
            border-radius: var(--radius-md);
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--dark-border);
            height: fit-content;
            transition: all 0.3s ease;
        }

        body.light-mode .trading-terminal {
            background: var(--light-card);
            border: 1px solid var(--light-border);
        }

        .account-info {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 136, 255, 0.1));
            border-radius: var(--radius-md);
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        body.light-mode .account-info {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.15), rgba(0, 136, 255, 0.15));
        }

        .account-balance {
            font-size: 24px;
            font-weight: 800;
            color: var(--text-light);
            margin: 10px 0;
        }

        body.light-mode .account-balance {
            color: var(--text-dark);
        }

        .account-type {
            color: var(--primary);
            font-size: 13px;
            font-weight: 600;
        }

        /* Portfolio Stats - Responsive */
        .portfolio-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        @media (max-width: 768px) {
            .portfolio-stats {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 480px) {
            .portfolio-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius-sm);
            padding: 12px;
            text-align: center;
        }

        body.light-mode .stat-card {
            background: rgba(0, 0, 0, 0.03);
        }

        /* Order Type Selector - Responsive */
        .order-type-selector {
            display: flex;
            gap: 5px;
            background: rgba(255, 255, 255, 0.05);
            padding: 5px;
            border-radius: var(--radius-sm);
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        body.light-mode .order-type-selector {
            background: rgba(0, 0, 0, 0.05);
        }

        .order-type-btn {
            flex: 1;
            padding: 8px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 12px;
            min-width: 60px;
        }

        body.light-mode .order-type-btn {
            color: rgba(0, 0, 0, 0.6);
        }

        .order-type-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Trade Form - Responsive */
        .trade-form {
            margin-bottom: 20px;
        }

        .trade-form h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 16px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            font-size: 13px;
        }

        body.light-mode .form-group label {
            color: rgba(0, 0, 0, 0.8);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        @media (max-width: 480px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--dark-border);
            border-radius: var(--radius-sm);
            color: var(--text-light);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        body.light-mode .form-control {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid var(--light-border);
            color: var(--text-dark);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.1);
        }

        .volume-display {
            margin-top: 8px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
            text-align: center;
        }

        body.light-mode .volume-display {
            color: rgba(0, 0, 0, 0.7);
        }

        /* Trade Buttons - Responsive */
        .trade-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 480px) {
            .trade-buttons {
                grid-template-columns: 1fr;
            }
        }

        /* Risk Calculator - Responsive */
        .risk-calculator {
            background: var(--dark-card);
            border-radius: var(--radius-md);
            padding: 15px;
            margin-top: 15px;
            border: 1px solid var(--dark-border);
        }

        body.light-mode .risk-calculator {
            background: var(--light-card);
            border: 1px solid var(--light-border);
        }

        .risk-results {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        @media (max-width: 768px) {
            .risk-results {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .risk-results {
                grid-template-columns: 1fr;
            }
        }

        .risk-result {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-sm);
            padding: 10px;
            text-align: center;
        }

        body.light-mode .risk-result {
            background: rgba(0, 0, 0, 0.05);
        }

        .risk-value {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary);
            margin: 5px 0;
        }

        /* Quick Actions - Responsive */
        .quick-actions {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            padding: 15px;
            margin-top: 20px;
        }

        body.light-mode .quick-actions {
            background: rgba(0, 0, 0, 0.05);
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        @media (max-width: 480px) {
            .action-buttons {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .action-btn {
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--dark-border);
            border-radius: var(--radius-sm);
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        body.light-mode .action-btn {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid var(--light-border);
            color: var(--text-dark);
        }

        .action-btn:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--primary);
        }

        /* Trading Journal - Responsive */
        .journal-container {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .journal-entry {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius-sm);
            padding: 12px;
            margin-bottom: 8px;
            border-left: 4px solid;
        }

        body.light-mode .journal-entry {
            background: rgba(0, 0, 0, 0.03);
        }

        /* Price Ticker - Responsive */
        .price-ticker {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 14, 23, 0.95);
            border-top: 1px solid var(--dark-border);
            padding: 10px 0;
            overflow: hidden;
            z-index: 999;
        }

        body.light-mode .price-ticker {
            background: rgba(245, 247, 250, 0.95);
            border-top: 1px solid var(--light-border);
        }

        .ticker-container {
            display: flex;
            gap: 30px;
            animation: ticker 30s linear infinite;
        }

        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .ticker-item {
            display: flex;
            align-items: center;
            gap: 10px;
            white-space: nowrap;
        }

        .ticker-pair {
            font-weight: 600;
            color: var(--text-light);
            font-size: 14px;
        }

        body.light-mode .ticker-pair {
            color: var(--text-dark);
        }

        .ticker-price {
            font-weight: 700;
            color: var(--primary);
            font-size: 15px;
        }

        /* Theme Toggle - Responsive */
        .theme-toggle {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 1001;
            background: var(--dark-card);
            border: 1px solid var(--dark-border);
            border-radius: 20px;
            padding: 6px;
            backdrop-filter: blur(10px);
            display: flex;
            gap: 5px;
        }

        body.light-mode .theme-toggle {
            background: var(--light-card);
            border: 1px solid var(--light-border);
        }

        .theme-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
            font-size: 16px;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        body.light-mode .theme-btn {
            color: var(--text-dark);
            background: rgba(0, 0, 0, 0.05);
        }

        .theme-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: scale(1.1);
        }

        .theme-btn.active {
            background: var(--primary);
            color: white;
        }

        @media (max-width: 768px) {
            .theme-toggle {
                top: 80px;
                right: 10px;
            }
        }

        /* AI Signal - Responsive */
        .ai-signal {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 136, 255, 0.1));
            border-radius: var(--radius-md);
            padding: 12px;
            margin-top: 15px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        /* Modal - Responsive */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--dark-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-md);
            width: 100%;
            max-width: 500px;
            padding: 25px;
            position: relative;
            border: 1px solid var(--dark-border);
            animation: modalSlideIn 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        body.light-mode .modal-content {
            background: var(--light-card);
            border: 1px solid var(--light-border);
        }

        @media (max-width: 480px) {
            .modal-content {
                padding: 20px 15px;
            }
        }

        /* Notification - Responsive */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: var(--dark-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--dark-border);
            border-left: 4px solid;
            padding: 12px 16px;
            border-radius: var(--radius-sm);
            color: var(--text-light);
            z-index: 3000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 300px;
        }

        body.light-mode .notification {
            background: var(--light-card);
            border: 1px solid var(--light-border);
            color: var(--text-dark);
        }

        @media (max-width: 768px) {
            .notification {
                top: 80px;
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }

        /* Mobile Menu Styles */
        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }
            
            .nav-links {
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                background-color: rgba(10, 14, 23, 0.95);
                backdrop-filter: blur(10px);
                flex-direction: column;
                align-items: center;
                padding: 20px 0;
                border-top: 1px solid var(--dark-border);
                display: none;
                gap: 0;
                z-index: 1000;
            }
            
            body.light-mode .nav-links {
                background-color: rgba(255, 255, 255, 0.95);
                border-top: 1px solid var(--light-border);
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-links li {
                margin: 12px 0;
                width: 100%;
                text-align: center;
            }
            
            .nav-links a {
                display: block;
                padding: 10px;
                width: 100%;
            }
            
            .header-right {
                gap: 10px;
            }
            
            .demo-balance-display {
                padding: 6px 10px;
                font-size: 14px;
            }
            
            .logo {
                font-size: 20px;
            }
            
            .logo i {
                font-size: 20px;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .header-container {
                padding: 10px 15px;
            }
            
            .logo {
                font-size: 18px;
            }
            
            .mobile-menu-btn {
                font-size: 20px;
                padding: 6px;
            }
            
            .platform-container {
                margin-top: 60px;
            }
            
            h3 {
                font-size: 16px;
            }
            
            h4 {
                font-size: 15px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        body.light-mode .loading {
            border-color: rgba(0, 0, 0, 0.3);
        }

        /* Touch-friendly improvements */
        button, 
        input[type="range"],
        .action-btn,
        .market-item {
            -webkit-tap-highlight-color: transparent;
        }

        input[type="range"] {
            height: 30px;
        }

        /* Hide scrollbars but keep functionality */
        .market-watch::-webkit-scrollbar,
        .trading-terminal::-webkit-scrollbar,
        .journal-container::-webkit-scrollbar {
            width: 4px;
        }

        .market-watch::-webkit-scrollbar-track,
        .trading-terminal::-webkit-scrollbar-track,
        .journal-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
        }

        .market-watch::-webkit-scrollbar-thumb,
        .trading-terminal::-webkit-scrollbar-thumb,
        .journal-container::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 2px;
        }

        /* Landscape mode optimization */
        @media (max-height: 600px) and (orientation: landscape) {
            .platform-container {
                min-height: calc(100vh - 60px);
            }
            
            .chart-container {
                min-height: 250px;
            }
            
            .market-watch,
            .trading-terminal {
                max-height: 300px;
            }
        }

        /* High DPI screens */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .btn,
            .action-btn,
            .tool-btn {
                border-width: 0.5px;
            }
        }

        /* Reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .ticker-container {
                animation: none;
            }
        }

        /* Print styles */
        @media print {
            .platform-container {
                display: block;
            }
            
            .market-watch,
            .trading-chart,
            .trading-terminal {
                break-inside: avoid;
                margin-bottom: 20px;
            }
            
            .price-ticker,
            .theme-toggle,
            .mobile-menu-btn {
                display: none;
            }
        }

        /* Utility Classes for Responsive Design */
        .d-none {
            display: none !important;
        }

        .d-block {
            display: block !important;
        }

        .d-flex {
            display: flex !important;
        }

        .d-grid {
            display: grid !important;
        }

        @media (max-width: 768px) {
            .d-md-none {
                display: none !important;
            }
            
            .d-md-block {
                display: block !important;
            }
            
            .d-md-flex {
                display: flex !important;
            }
        }

        @media (max-width: 480px) {
            .d-sm-none {
                display: none !important;
            }
            
            .d-sm-block {
                display: block !important;
            }
            
            .d-sm-flex {
                display: flex !important;
            }
        }

        /* Text Truncation */
        .text-truncate {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Spacing Utilities */
        .my-1 { margin-top: 0.5rem; margin-bottom: 0.5rem; }
        .my-2 { margin-top: 1rem; margin-bottom: 1rem; }
        .my-3 { margin-top: 1.5rem; margin-bottom: 1.5rem; }
        .my-4 { margin-top: 2rem; margin-bottom: 2rem; }

        .mx-1 { margin-left: 0.5rem; margin-right: 0.5rem; }
        .mx-2 { margin-left: 1rem; margin-right: 1rem; }
        .mx-3 { margin-left: 1.5rem; margin-right: 1.5rem; }
        .mx-4 { margin-left: 2rem; margin-right: 2rem; }

        .p-1 { padding: 0.5rem; }
        .p-2 { padding: 1rem; }
        .p-3 { padding: 1.5rem; }
        .p-4 { padding: 2rem; }

        /* Flex Utilities */
        .flex-column { flex-direction: column; }
        .flex-wrap { flex-wrap: wrap; }
        .justify-content-center { justify-content: center; }
        .justify-content-between { justify-content: space-between; }
        .align-items-center { align-items: center; }
        .align-items-start { align-items: flex-start; }
        .align-items-end { align-items: flex-end; }

        /* Grid Utilities */
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }

        @media (max-width: 768px) {
            .grid-md-2 { grid-template-columns: repeat(2, 1fr); }
            .grid-md-1 { grid-template-columns: 1fr; }
        }

        @media (max-width: 480px) {
            .grid-sm-1 { grid-template-columns: 1fr; }
            .grid-sm-2 { grid-template-columns: repeat(2, 1fr); }
        }

        /* Gap Utilities */
        .gap-1 { gap: 0.5rem; }
        .gap-2 { gap: 1rem; }
        .gap-3 { gap: 1.5rem; }
        .gap-4 { gap: 2rem; }
    </style>
</head>
<body>
    <!-- Theme Toggle -->
    <div class="theme-toggle">
        <button class="theme-btn active" id="darkModeBtn" title="Dark Mode">
            <i class="fas fa-moon"></i>
        </button>
        <button class="theme-btn" id="lightModeBtn" title="Light Mode">
            <i class="fas fa-sun"></i>
        </button>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo">
                <i class="fas fa-robot"></i>Trade <span>XM</span>
            </a>
            <div class="header-right">
                <span class="demo-balance-display" id="demoBalanceDisplay">
                    <i class="fas fa-wallet"></i> $<span id="demoBalance">10,000.00</span>
                </span>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <ul class="nav-links" id="navLinks">
                    <li><a href="#platform">Trading</a></li>
                    <li><a href="#market">Market</a></li>
                    <li><a href="#signals">Signals</a></li>
                    <li><a href="#history">History</a></li>
                    <li><a href="#" class="btn btn-success" id="depositBtn"><i class="fas fa-plus-circle"></i> Deposit</a></li>
                </ul>
            </div>
        </div>
    </header>

    <!-- Trading Platform -->
    <div class="platform-container" id="platform">
        <!-- Left Panel - Market Watch -->
        <div class="market-watch">
            <h3><i class="fas fa-chart-line"></i> Market Watch</h3>
            
            <!-- Feature Tabs -->
            <div class="feature-tabs">
                <button class="tab-btn active" data-tab="markets">Markets</button>
                <button class="tab-btn" data-tab="calendar">Calendar</button>
                <button class="tab-btn" data-tab="social">Social</button>
            </div>
            
            <!-- Markets Tab -->
            <div class="feature-content active" id="marketsTab">
                <ul class="market-list" id="marketList">
                    <!-- Market items populated by JavaScript -->
                </ul>
                
                <!-- AI Signals -->
                <div class="ai-signal" id="aiSignal">
                    <h5><i class="fas fa-brain"></i> AI Signal</h5>
                    <p id="signalText" class="text-truncate">Analyzing market patterns...</p>
                    <div class="signal-strength">
                        <div class="signal-fill" id="signalFill" style="width: 75%"></div>
                    </div>
                    <div class="signal-meta d-flex justify-content-between">
                        <span><i class="fas fa-bullseye"></i> <strong id="signalConfidence">75%</strong></span>
                        <span><i class="fas fa-clock"></i> <strong id="signalExpiry">2h</strong></span>
                    </div>
                </div>
            </div>
            
            <!-- Economic Calendar Tab -->
            <div class="feature-content" id="calendarTab">
                <h5><i class="fas fa-calendar-alt"></i> Economic Calendar</h5>
                <div id="calendarEvents">
                    <!-- Calendar events populated by JavaScript -->
                </div>
            </div>
            
            <!-- Social Trading Tab -->
            <div class="feature-content" id="socialTab">
                <h5><i class="fas fa-users"></i> Top Traders</h5>
                <div id="topTraders">
                    <!-- Trader cards populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Center Panel - Trading Chart -->
        <div class="trading-chart">
            <div class="chart-header">
                <div class="selected-pair">
                    <div class="pair-name" id="selectedPair">EUR/USD</div>
                    <div class="price-display" id="currentPrice">1.08542</div>
                </div>
                
                <!-- Chart Tools -->
                <div class="chart-toolbar">
                    <button class="tool-btn" data-tool="line" title="Trend Line">
                        <i class="fas fa-slash"></i>
                    </button>
                    <button class="tool-btn" data-tool="fibonacci" title="Fibonacci">
                        <i class="fas fa-wave-square"></i>
                    </button>
                    <button class="tool-btn" data-tool="rectangle" title="Rectangle">
                        <i class="far fa-square"></i>
                    </button>
                    <button class="tool-btn" data-tool="indicator" title="Indicator">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                    <button class="tool-btn" data-tool="clear" title="Clear">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                
                <div class="timeframe-selector">
                    <button class="timeframe-btn active" data-timeframe="1">1M</button>
                    <button class="timeframe-btn" data-timeframe="5">5M</button>
                    <button class="timeframe-btn" data-timeframe="15">15M</button>
                    <button class="timeframe-btn" data-timeframe="60">1H</button>
                    <button class="timeframe-btn" data-timeframe="240">4H</button>
                    <button class="timeframe-btn" data-timeframe="1440">1D</button>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="line-preview" id="linePreview">
                    <i class="fas fa-info-circle"></i> Hover BUY/SELL for preview
                </div>
                
                <div class="chart-overlay" id="chartOverlay">
                    <!-- Trade lines drawn by JavaScript -->
                </div>
                
                <canvas id="tradingChart"></canvas>
            </div>
            
            <!-- Multi-Chart View -->
            <div class="multi-chart-container" id="multiChartContainer">
                <!-- Mini charts populated by JavaScript -->
            </div>
            
            <div class="chart-footer">
                <div class="chart-stats d-flex flex-wrap justify-content-center gap-4">
                    <div class="stat">
                        <span class="stat-label">High:</span>
                        <span class="stat-value" id="dayHigh">1.08720</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Low:</span>
                        <span class="stat-value" id="dayLow">1.08410</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Change:</span>
                        <span class="stat-value positive" id="dailyChange">+0.0021 (+0.19%)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Trading Terminal -->
        <div class="trading-terminal">
            <div class="account-info">
                <div class="account-type">DEMO ACCOUNT</div>
                <div class="account-balance" id="accountBalance">$10,000.00</div>
                <div class="account-equity">Equity: $10,235.60</div>
            </div>
            
            <!-- Portfolio Analytics -->
            <div class="portfolio-stats">
                <div class="stat-card">
                    <div class="stat-label">Win Rate</div>
                    <div class="risk-value" id="winRate">65%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Avg. Profit</div>
                    <div class="risk-value positive" id="avgProfit">$42.50</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Sharpe Ratio</div>
                    <div class="risk-value" id="sharpeRatio">1.25</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Max Drawdown</div>
                    <div class="risk-value negative" id="maxDrawdown">-12.5%</div>
                </div>
            </div>
            
            <div class="trade-form">
                <h4><i class="fas fa-trade-federation"></i> Place Order</h4>
                
                <!-- Order Type Selector -->
                <div class="order-type-selector">
                    <button class="order-type-btn active" data-order-type="market">Market</button>
                    <button class="order-type-btn" data-order-type="limit">Limit</button>
                    <button class="order-type-btn" data-order-type="stop">Stop</button>
                    <button class="order-type-btn" data-order-type="oco">OCO</button>
                </div>
                
                <!-- Order Type Specific Fields -->
                <div class="order-type-fields" id="limitFields" style="display: none;">
                    <div class="form-group">
                        <label for="limitPrice">Limit Price</label>
                        <input type="number" id="limitPrice" class="form-control" step="0.00001" placeholder="Enter limit price">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tradeVolume">Volume (Lots)</label>
                    <input type="range" id="tradeVolume" min="0.01" max="10" step="0.01" value="0.1" class="form-control">
                    <div class="volume-display">
                        <span id="volumeValue">0.1</span> lots ($<span id="volumeCost">13.00</span> per trade)
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="stopLoss">Stop Loss (pips)</label>
                        <input type="number" id="stopLoss" value="20" min="5" max="200" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="takeProfit">Take Profit (pips)</label>
                        <input type="number" id="takeProfit" value="40" min="10" max="500" class="form-control">
                    </div>
                </div>
                
                <!-- Risk Calculator -->
                <div class="risk-calculator">
                    <h5><i class="fas fa-calculator"></i> Risk Calculator</h5>
                    <div class="form-group">
                        <label for="riskPercentage">Risk % of Balance</label>
                        <input type="range" id="riskPercentage" min="0.5" max="5" step="0.1" value="2" class="form-control">
                        <div class="volume-display">
                            <span id="riskValue">2</span>% of balance ($<span id="riskAmount">200.00</span>)
                        </div>
                    </div>
                    
                    <div class="risk-results">
                        <div class="risk-result">
                            <div class="stat-label">Risk/Reward</div>
                            <div class="risk-value" id="riskRewardRatio">1:2</div>
                        </div>
                        <div class="risk-result">
                            <div class="stat-label">Position Size</div>
                            <div class="risk-value" id="suggestedVolume">0.1</div>
                        </div>
                        <div class="risk-result">
                            <div class="stat-label">Potential Profit</div>
                            <div class="risk-value positive" id="potentialProfit">$26.00</div>
                        </div>
                    </div>
                </div>
                
                <div class="trade-buttons">
                    <button class="btn btn-success" id="buyBtn">
                        <i class="fas fa-arrow-up"></i> BUY
                    </button>
                    <button class="btn btn-danger" id="sellBtn">
                        <i class="fas fa-arrow-down"></i> SELL
                    </button>
                </div>
            </div>
            
            <div class="quick-actions">
                <h4><i class="fas fa-bolt"></i> Quick Actions</h4>
                <div class="action-buttons">
                    <button class="action-btn" id="closeAllBtn">
                        <i class="fas fa-times-circle"></i> Close All
                    </button>
                    <button class="action-btn" id="hedgeBtn">
                        <i class="fas fa-balance-scale"></i> Hedge
                    </button>
                    <button class="action-btn" id="reverseBtn">
                        <i class="fas fa-exchange-alt"></i> Reverse
                    </button>
                    <button class="action-btn" id="demoResetBtn">
                        <i class="fas fa-redo"></i> Reset Demo
                    </button>
                </div>
            </div>
            
            <!-- Trading Journal -->
            <div class="open-positions">
                <div class="positions-header d-flex justify-content-between align-items-center">
                    <h4><i class="fas fa-book"></i> Trading Journal</h4>
                    <span class="positions-count" id="journalCount">0 entries</span>
                </div>
                <div class="journal-container" id="journalEntries">
                    <!-- Journal entries populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Price Ticker -->
    <div class="price-ticker d-md-block">
        <div class="ticker-container" id="tickerContainer">
            <!-- Ticker items populated by JavaScript -->
        </div>
    </div>

    <!-- Order Confirmation Modal -->
    <div class="modal" id="orderModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <div class="order-confirmation">
                <div class="order-icon success" id="orderIcon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 id="orderTitle">Order Executed Successfully!</h2>
                <div class="order-details" id="orderDetails">
                    <!-- Order details populated by JavaScript -->
                </div>
                <button class="btn btn-block" id="closeOrderModal">Continue Trading</button>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification" id="notification">
        <div class="notification-header d-flex align-items-center">
            <i class="fas fa-info-circle"></i>
            <strong id="notificationTitle" class="mx-1">Notification</strong>
        </div>
        <div id="notificationMessage" class="text-truncate">This is a notification message.</div>
    </div>

    <script>
        // ===== RESPONSIVE JAVASCRIPT =====
        
        // Check device type and orientation
        const isMobile = () => window.innerWidth <= 768;
        const isTablet = () => window.innerWidth > 768 && window.innerWidth <= 992;
        const isDesktop = () => window.innerWidth > 992;
        const isPortrait = () => window.innerHeight > window.innerWidth;

        // Responsive trading state
        let tradingState = {
            balance: 10000.00,
            demoBalance: 10000.00,
            selectedPair: 'EUR/USD',
            currentPrice: 1.08542,
            positions: [],
            chart: null,
            timeframe: '1',
            marketData: {},
            tickerSpeed: 30,
            tradeCostPerLot: 130.00,
            pendingTradeLines: null,
            isDrawingLines: false,
            lineTimeout: null,
            activeChartTool: null,
            journalEntries: [],
            portfolioStats: {
                winRate: 65,
                avgProfit: 42.50,
                sharpeRatio: 1.25,
                maxDrawdown: 12.5,
                totalTrades: 0,
                profitableTrades: 0
            },
            socialTraders: [],
            calendarEvents: [],
            theme: 'dark',
            isMobileView: isMobile(),
            isTabletView: isTablet()
        };

        // Initialize on DOM load
        document.addEventListener('DOMContentLoaded', function() {
            // Check initial viewport
            tradingState.isMobileView = isMobile();
            tradingState.isTabletView = isTablet();
            
            // Setup responsive elements
            setupResponsiveElements();
            
            // Initialize trading platform
            initializeTradingPlatform();
            
            // Initialize new features
            initializeNewFeatures();
            
            // Setup resize listener
            setupResizeListener();
            
            // Setup touch interactions for mobile
            if (isMobile()) {
                setupTouchInteractions();
            }
        });

        // Setup responsive elements
        function setupResponsiveElements() {
            // Mobile menu toggle
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const navLinks = document.getElementById('navLinks');
            
            mobileMenuBtn.addEventListener('click', function() {
                navLinks.classList.toggle('active');
                this.innerHTML = navLinks.classList.contains('active') 
                    ? '<i class="fas fa-times"></i>' 
                    : '<i class="fas fa-bars"></i>';
            });

            // Close menu when clicking on links
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('active');
                    mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
                });
            });

            // Hide menu when clicking outside on mobile
            if (isMobile()) {
                document.addEventListener('click', function(event) {
                    if (!event.target.closest('.header-right') && 
                        !event.target.closest('.nav-links')) {
                        navLinks.classList.remove('active');
                        mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
                    }
                });
            }

            // Adjust chart height based on screen size
            adjustChartHeight();
        }

        // Setup resize listener
        function setupResizeListener() {
            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(function() {
                    tradingState.isMobileView = isMobile();
                    tradingState.isTabletView = isTablet();
                    
                    // Adjust layout
                    adjustChartHeight();
                    
                    // Update chart if exists
                    if (tradingState.chart) {
                        tradingState.chart.resize();
                    }
                    
                    // Update trade lines position
                    if (tradingState.isDrawingLines) {
                        updateTradeLinesPosition();
                    }
                    
                    // Toggle mobile-specific features
                    toggleMobileFeatures();
                    
                }, 250); // Debounce resize events
            });
        }

        // Adjust chart height based on device
        function adjustChartHeight() {
            const chartContainer = document.querySelector('.chart-container');
            if (!chartContainer) return;
            
            if (isMobile()) {
                // On mobile, use 60% of viewport height minus headers
                const viewportHeight = window.innerHeight;
                const platformTop = document.querySelector('.platform-container').offsetTop;
                const availableHeight = viewportHeight - platformTop - 100;
                chartContainer.style.minHeight = Math.min(availableHeight * 0.6, 300) + 'px';
            } else if (isTablet()) {
                chartContainer.style.minHeight = '350px';
            } else {
                chartContainer.style.minHeight = '400px';
            }
        }

        // Toggle mobile features
        function toggleMobileFeatures() {
            const priceTicker = document.querySelector('.price-ticker');
            const themeToggle = document.querySelector('.theme-toggle');
            
            if (isMobile()) {
                // Show/hide elements on mobile
                if (priceTicker) priceTicker.style.display = 'none';
                if (themeToggle) themeToggle.style.top = '70px';
            } else {
                if (priceTicker) priceTicker.style.display = 'block';
                if (themeToggle) themeToggle.style.top = '100px';
            }
        }

        // Setup touch interactions
        function setupTouchInteractions() {
            // Increase touch target sizes
            document.querySelectorAll('.btn, .action-btn, .market-item').forEach(element => {
                element.style.minHeight = '44px';
                element.style.padding = '12px';
            });

            // Add touch feedback
            document.querySelectorAll('.market-item, .action-btn').forEach(element => {
                element.addEventListener('touchstart', function() {
                    this.style.opacity = '0.7';
                });
                
                element.addEventListener('touchend', function() {
                    this.style.opacity = '1';
                });
            });

            // Prevent zoom on double tap
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function(event) {
                const now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);

            // Improve slider touch experience
            const volumeSlider = document.getElementById('tradeVolume');
            if (volumeSlider) {
                volumeSlider.style.height = '30px';
                volumeSlider.style.webkitAppearance = 'none';
            }
        }

        // Responsive chart initialization
        function initializeChart() {
            const ctx = document.getElementById('tradingChart').getContext('2d');
            
            // Adjust chart options based on screen size
            const isSmallScreen = isMobile() || isTablet();
            const pointRadius = isSmallScreen ? 0 : 0;
            const tension = isSmallScreen ? 0.4 : 0.4;
            
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, 'rgba(0, 212, 255, 0.3)');
            gradient.addColorStop(1, 'rgba(0, 212, 255, 0)');
            
            tradingState.chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: generateTimeLabels(isSmallScreen ? 30 : 50),
                    datasets: [{
                        label: tradingState.selectedPair,
                        data: generatePriceData(isSmallScreen ? 30 : 50, tradingState.marketData[tradingState.selectedPair]?.price || 1.08542),
                        borderColor: '#00d4ff',
                        backgroundColor: gradient,
                        borderWidth: isSmallScreen ? 1.5 : 2,
                        fill: true,
                        tension: tension,
                        pointRadius: pointRadius
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: isSmallScreen ? 0 : 0
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: tradingState.theme === 'dark' ? 'rgba(20, 25, 40, 0.9)' : 'rgba(255, 255, 255, 0.9)',
                            titleColor: tradingState.theme === 'dark' ? '#00d4ff' : '#0088ff',
                            bodyColor: tradingState.theme === 'dark' ? 'white' : '#333',
                            borderColor: '#00d4ff',
                            borderWidth: 1,
                            padding: isSmallScreen ? 8 : 12,
                            titleFont: {
                                size: isSmallScreen ? 12 : 14
                            },
                            bodyFont: {
                                size: isSmallScreen ? 11 : 13
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: tradingState.theme === 'dark' ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                color: tradingState.theme === 'dark' ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.6)',
                                maxTicksLimit: isSmallScreen ? 6 : 10,
                                font: {
                                    size: isSmallScreen ? 10 : 12
                                }
                            }
                        },
                        y: {
                            position: 'right',
                            grid: {
                                color: tradingState.theme === 'dark' ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                color: tradingState.theme === 'dark' ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.6)',
                                callback: function(value) {
                                    return formatPrice(tradingState.selectedPair, value);
                                },
                                font: {
                                    size: isSmallScreen ? 10 : 12
                                }
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        // Responsive trade execution
        function executeTrade(type) {
            // Show loading state on mobile
            if (isMobile()) {
                const btn = type === 'buy' ? document.getElementById('buyBtn') : document.getElementById('sellBtn');
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<div class="loading"></div>';
                btn.disabled = true;
                
                // Restore button after execution
                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.disabled = false;
                }, 1000);
            }
            
            // Original trade execution logic here...
            // [Previous executeTrade code remains the same]
        }

        // Responsive notification system
        function showNotification(type, title, message) {
            const notification = document.getElementById('notification');
            const notificationTitle = document.getElementById('notificationTitle');
            const notificationMessage = document.getElementById('notificationMessage');
            
            // Set notification content
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            // Set notification type
            notification.className = `notification ${type} show`;
            
            // Set icon based on type
            const icon = notification.querySelector('i');
            if (type === 'success') {
                icon.className = 'fas fa-check-circle';
                icon.style.color = '#00ff88';
            } else if (type === 'error') {
                icon.className = 'fas fa-exclamation-circle';
                icon.style.color = '#ff3366';
            } else {
                icon.className = 'fas fa-info-circle';
                icon.style.color = '#00d4ff';
            }
            
            // Auto-hide duration based on screen size
            const hideDuration = isMobile() ? 3000 : 5000;
            
            // Hide after delay
            setTimeout(() => {
                notification.classList.remove('show');
            }, hideDuration);
            
            // Auto-hide on mobile when tapping
            if (isMobile()) {
                notification.addEventListener('click', function hideNotification() {
                    this.classList.remove('show');
                    this.removeEventListener('click', hideNotification);
                });
            }
        }

        // Responsive market watch
        function updateMarketWatch() {
            const marketList = document.getElementById('marketList');
            if (!marketList) return;
            
            // Clear existing items
            marketList.innerHTML = '';
            
            // Show limited items on mobile
            const pairsToShow = isMobile() ? currencyPairs.slice(0, 4) : currencyPairs;
            
            pairsToShow.forEach(pair => {
                const isActive = pair.symbol === tradingState.selectedPair;
                const changeClass = pair.change >= 0 ? 'positive' : 'negative';
                const changeSign = pair.change >= 0 ? '+' : '';
                
                const listItem = document.createElement('li');
                listItem.className = `market-item ${isActive ? 'active' : ''}`;
                listItem.dataset.symbol = pair.symbol;
                
                // Simplified display on mobile
                if (isMobile()) {
                    listItem.innerHTML = `
                        <div class="pair-info">
                            <div class="pair-name">${pair.symbol}</div>
                        </div>
                        <div class="pair-price">
                            <div class="current-price">${formatPrice(pair.symbol, pair.price)}</div>
                            <div class="price-change ${changeClass}">
                                ${changeSign}${pair.changePercent}%
                            </div>
                        </div>
                    `;
                } else {
                    listItem.innerHTML = `
                        <div class="pair-info">
                            <div class="pair-name">${pair.symbol}</div>
                            <div class="pair-description">${pair.name}</div>
                        </div>
                        <div class="pair-price">
                            <div class="current-price">${formatPrice(pair.symbol, pair.price)}</div>
                            <div class="price-change ${changeClass}">
                                ${changeSign}${formatChange(pair.symbol, pair.change)}
                            </div>
                        </div>
                    `;
                }
                
                listItem.addEventListener('click', () => selectPair(pair.symbol));
                marketList.appendChild(listItem);
            });
        }

        // Responsive ticker
        function updateTicker() {
            const tickerContainer = document.getElementById('tickerContainer');
            if (!tickerContainer) return;
            
            // Adjust speed based on screen size
            const speed = isMobile() ? 20 : 30;
            tickerContainer.style.animationDuration = `${speed}s`;
            
            // Show fewer items on mobile
            const pairsToShow = isMobile() ? currencyPairs.slice(0, 6) : currencyPairs;
            
            // Update ticker items
            let tickerHTML = '';
            for (let i = 0; i < 2; i++) {
                pairsToShow.forEach(pair => {
                    const changeClass = pair.change >= 0 ? 'positive' : 'negative';
                    const changeSign = pair.change >= 0 ? '+' : '';
                    
                    tickerHTML += `
                        <div class="ticker-item">
                            <div class="ticker-pair">${pair.symbol}</div>
                            <div class="ticker-price">${formatPrice(pair.symbol, pair.price)}</div>
                            <div class="ticker-change ${changeClass}">
                                ${changeSign}${isMobile() ? pair.changePercent + '%' : formatChange(pair.symbol, pair.change)}
                            </div>
                        </div>
                    `;
                });
            }
            
            tickerContainer.innerHTML = tickerHTML;
        }

        // Handle orientation changes
        window.addEventListener('orientationchange', function() {
            // Wait for orientation to complete
            setTimeout(function() {
                adjustChartHeight();
                
                if (tradingState.chart) {
                    tradingState.chart.resize();
                    tradingState.chart.update();
                }
                
                // Update trade lines
                if (tradingState.isDrawingLines) {
                    updateTradeLinesPosition();
                }
            }, 300);
        });

        // Prevent bounce/overscroll on mobile
        document.addEventListener('touchmove', function(e) {
            if (e.target.classList.contains('market-watch') || 
                e.target.classList.contains('trading-terminal') ||
                e.target.classList.contains('journal-container')) {
                return;
            }
            
            if (e.target.closest('.market-watch') || 
                e.target.closest('.trading-terminal') ||
                e.target.closest('.journal-container')) {
                return;
            }
            
            e.preventDefault();
        }, { passive: false });

        // Initialize new features (responsive version)
        function initializeNewFeatures() {
            // Theme toggle
            const darkBtn = document.getElementById('darkModeBtn');
            const lightBtn = document.getElementById('lightModeBtn');
            
            darkBtn.addEventListener('click', () => {
                document.body.classList.remove('light-mode');
                tradingState.theme = 'dark';
                darkBtn.classList.add('active');
                lightBtn.classList.remove('active');
                updateChartTheme();
            });
            
            lightBtn.addEventListener('click', () => {
                document.body.classList.add('light-mode');
                tradingState.theme = 'light';
                lightBtn.classList.add('active');
                darkBtn.classList.remove('active');
                updateChartTheme();
            });
            
            // Initialize other features...
            // [Rest of initializeNewFeatures remains the same]
        }

        // Update chart theme
        function updateChartTheme() {
            if (!tradingState.chart) return;
            
            const isDark = tradingState.theme === 'dark';
            const gridColor = isDark ? 'rgba(255, 255, 255, 0.05)' : 'rgba(0, 0, 0, 0.05)';
            const tickColor = isDark ? 'rgba(255, 255, 255, 0.6)' : 'rgba(0, 0, 0, 0.6)';
            const tooltipBg = isDark ? 'rgba(20, 25, 40, 0.9)' : 'rgba(255, 255, 255, 0.9)';
            const tooltipText = isDark ? 'white' : '#333';
            
            tradingState.chart.options.scales.x.grid.color = gridColor;
            tradingState.chart.options.scales.x.ticks.color = tickColor;
            tradingState.chart.options.scales.y.grid.color = gridColor;
            tradingState.chart.options.scales.y.ticks.color = tickColor;
            tradingState.chart.options.plugins.tooltip.backgroundColor = tooltipBg;
            tradingState.chart.options.plugins.tooltip.bodyColor = tooltipText;
            
            tradingState.chart.update();
        }

        // ===== ORIGINAL FUNCTIONS (UPDATED FOR RESPONSIVENESS) =====
        // Market data and other functions remain mostly the same, 
        // but with responsive checks where needed
        
        const currencyPairs = [
            { symbol: 'EUR/USD', name: 'Euro vs US Dollar', price: 1.08542, change: 0.0021, changePercent: 0.19, high: 1.08720, low: 1.08410 },
            { symbol: 'GBP/USD', name: 'British Pound vs US Dollar', price: 1.26580, change: -0.0015, changePercent: -0.12, high: 1.26890, low: 1.26320 },
            { symbol: 'USD/JPY', name: 'US Dollar vs Japanese Yen', price: 147.325, change: 0.452, changePercent: 0.31, high: 147.890, low: 146.950 },
            { symbol: 'USD/CAD', name: 'US Dollar vs Canadian Dollar', price: 1.35420, change: -0.0018, changePercent: -0.13, high: 1.35780, low: 1.35210 },
            { symbol: 'AUD/USD', name: 'Australian Dollar vs US Dollar', price: 0.65780, change: 0.0012, changePercent: 0.18, high: 0.65920, low: 0.65560 },
            { symbol: 'XAU/USD', name: 'Gold vs US Dollar', price: 1984.50, change: 12.80, changePercent: 0.65, high: 1992.30, low: 1975.80 },
            { symbol: 'BTC/USD', name: 'Bitcoin vs US Dollar', price: 43520.00, change: 1250.00, changePercent: 2.96, high: 43890.00, low: 42850.00 },
            { symbol: 'ETH/USD', name: 'Ethereum vs US Dollar', price: 2350.00, change: 45.00, changePercent: 1.95, high: 2380.00, low: 2310.00 }
        ];

        function initializeTradingPlatform() {
            // Initialize market data
            initializeMarketData();
            
            // Initialize chart
            initializeChart();
            
            // Initialize market watch
            updateMarketWatch();
            
            // Initialize ticker
            updateTicker();
            
            // Set up event listeners
            setupEventListeners();
            
            // Start price updates
            startPriceUpdates();
            
            // Start position updates
            startPositionUpdates();
        }

        // [Rest of the original functions remain, but use isMobile(), isTablet(), isDesktop() 
        // checks where appropriate for responsive behavior]
    </script>
</body>
</html>
