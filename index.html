<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade XM - Real-Time AI Trading Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #0a0e17;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #ffffff;
        }

        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        section {
            padding: 80px 0;
        }

        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #00d4ff, #0088ff);
            color: white;
            border: none;
            border-radius: 4px;
            font-weight: 500;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }

        .btn:hover {
            background: linear-gradient(135deg, #0088ff, #00d4ff);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 212, 255, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #00ff88, #00cc66);
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #00cc66, #00ff88);
            box-shadow: 0 6px 20px rgba(0, 255, 136, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff3366, #cc0044);
            box-shadow: 0 4px 15px rgba(255, 51, 102, 0.3);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #cc0044, #ff3366);
            box-shadow: 0 6px 20px rgba(255, 51, 102, 0.4);
        }

        /* Header Styles */
        header {
            background-color: rgba(10, 14, 23, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
        }

        .logo {
            font-family: 'Poppins', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo span {
            background: linear-gradient(135deg, #00d4ff, #0088ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo i {
            margin-right: 10px;
            font-size: 30px;
            color: #00d4ff;
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            font-size: 16px;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #00d4ff;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            color: #00d4ff;
            cursor: pointer;
        }

        /* Trading Platform Layout */
        .platform-container {
            display: grid;
            grid-template-columns: 300px 1fr 350px;
            gap: 20px;
            margin-top: 80px;
            padding: 20px;
            min-height: calc(100vh - 80px);
        }

        /* Left Panel - Market Watch */
        .market-watch {
            background: rgba(20, 25, 40, 0.9);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: fit-content;
        }

        .market-watch h3 {
            color: #00d4ff;
            margin-bottom: 25px;
            font-size: 20px;
            display: flex;
            align-items: center;
        }

        .market-watch h3 i {
            margin-right: 10px;
        }

        .market-list {
            list-style: none;
        }

        .market-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: background 0.3s;
        }

        .market-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .market-item.active {
            background: rgba(0, 212, 255, 0.1);
            border-left: 3px solid #00d4ff;
        }

        .pair-info {
            display: flex;
            flex-direction: column;
        }

        .pair-name {
            font-weight: 600;
            color: white;
            font-size: 16px;
        }

        .pair-description {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
        }

        .pair-price {
            text-align: right;
        }

        .current-price {
            font-weight: 700;
            font-size: 18px;
            color: white;
        }

        .price-change {
            font-size: 12px;
            font-weight: 600;
        }

        .price-change.positive {
            color: #00ff88;
        }

        .price-change.negative {
            color: #ff3366;
        }

        /* Center Panel - Trading Chart */
        .trading-chart {
            background: rgba(20, 25, 40, 0.9);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .selected-pair {
            display: flex;
            align-items: center;
        }

        .selected-pair .pair-name {
            font-size: 24px;
            font-weight: 700;
            color: white;
            margin-right: 15px;
        }

        .price-display {
            font-size: 28px;
            font-weight: 800;
            color: #00d4ff;
        }

        .timeframe-selector {
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.05);
            padding: 5px;
            border-radius: 8px;
        }

        .timeframe-btn {
            padding: 8px 15px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .timeframe-btn.active {
            background: #00d4ff;
            color: white;
        }

        .chart-container {
            flex: 1;
            position: relative;
            background: rgba(10, 14, 23, 0.5);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 400px;
        }

        /* Chart Overlay for Trade Lines */
        .chart-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 10;
        }

        .trade-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 2px;
            pointer-events: none;
            z-index: 5;
        }

        .trade-line.entry {
            border-bottom: 2px dashed #00ff88;
        }

        .trade-line.sl {
            border-bottom: 2px dashed #ff3366;
        }

        .trade-line.tp {
            border-bottom: 2px dashed #00d4ff;
        }

        .line-label {
            position: absolute;
            right: 10px;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            color: white;
            transform: translateY(-50%);
        }

        .line-label.entry {
            background: rgba(0, 255, 136, 0.7);
        }

        .line-label.sl {
            background: rgba(255, 51, 102, 0.7);
        }

        .line-label.tp {
            background: rgba(0, 212, 255, 0.7);
        }

        /* Right Panel - Trading Terminal */
        .trading-terminal {
            background: rgba(20, 25, 40, 0.9);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: fit-content;
        }

        .account-info {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 136, 255, 0.1));
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .account-balance {
            font-size: 32px;
            font-weight: 800;
            color: white;
            margin: 10px 0;
        }

        .account-type {
            color: #00d4ff;
            font-size: 14px;
            font-weight: 600;
        }

        .trade-form {
            margin-bottom: 30px;
        }

        .trade-form h4 {
            color: #00d4ff;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: white;
            font-size: 16px;
        }

        .form-control:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .volume-display {
            margin-top: 10px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            text-align: center;
        }

        .trade-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }

        .quick-actions {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .quick-actions h4 {
            color: #00d4ff;
            margin-bottom: 20px;
            font-size: 18px;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .action-btn {
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .action-btn:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: #00d4ff;
        }

        /* Open Positions */
        .open-positions {
            margin-top: 30px;
        }

        .positions-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .positions-list {
            list-style: none;
        }

        .position-item {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid;
        }

        .position-item.buy {
            border-left-color: #00ff88;
        }

        .position-item.sell {
            border-left-color: #ff3366;
        }

        .position-pair {
            font-weight: 600;
            color: white;
        }

        .position-type {
            text-align: center;
            font-weight: 600;
        }

        .position-type.buy {
            color: #00ff88;
        }

        .position-type.sell {
            color: #ff3366;
        }

        .position-pl {
            text-align: right;
            font-weight: 700;
        }

        .position-pl.profit {
            color: #00ff88;
        }

        .position-pl.loss {
            color: #ff3366;
        }

        /* Price Ticker */
        .price-ticker {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(10, 14, 23, 0.95);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px 0;
            overflow: hidden;
        }

        .ticker-container {
            display: flex;
            gap: 40px;
            animation: ticker 30s linear infinite;
        }

        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .ticker-item {
            display: flex;
            align-items: center;
            gap: 15px;
            white-space: nowrap;
        }

        .ticker-pair {
            font-weight: 600;
            color: white;
            font-size: 16px;
        }

        .ticker-price {
            font-weight: 700;
            color: #00d4ff;
            font-size: 18px;
        }

        .ticker-change {
            font-weight: 600;
            font-size: 14px;
        }

        .ticker-change.positive {
            color: #00ff88;
        }

        .ticker-change.negative {
            color: #ff3366;
        }

        /* Mobile Responsiveness */
        @media (max-width: 1200px) {
            .platform-container {
                grid-template-columns: 250px 1fr 300px;
            }
        }

        @media (max-width: 992px) {
            .platform-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .market-watch, .trading-terminal {
                max-height: 400px;
                overflow-y: auto;
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }
            
            .nav-links {
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                background-color: rgba(10, 14, 23, 0.95);
                backdrop-filter: blur(10px);
                flex-direction: column;
                align-items: center;
                padding: 20px 0;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                display: none;
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-links li {
                margin: 15px 0;
            }
            
            .chart-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .trade-buttons {
                grid-template-columns: 1fr;
            }
        }

        /* Chart Customization */
        canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .chart-footer {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            display: block;
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            margin-bottom: 5px;
        }

        .stat-value {
            font-weight: 600;
            color: white;
            font-size: 14px;
        }

        .stat-value.positive {
            color: #00ff88;
        }

        .stat-value.negative {
            color: #ff3366;
        }

        /* Order Confirmation Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: rgba(20, 25, 40, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            padding: 40px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.6);
        }

        .order-confirmation {
            text-align: center;
        }

        .order-icon {
            font-size: 60px;
            margin-bottom: 20px;
        }

        .order-icon.success {
            color: #00ff88;
        }

        .order-icon.error {
            color: #ff3366;
        }

        .order-details {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
            text-align: left;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #00d4ff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(20, 25, 40, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 4px solid;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            z-index: 3000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 350px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left-color: #00ff88;
        }

        .notification.error {
            border-left-color: #ff3366;
        }

        .notification.info {
            border-left-color: #00d4ff;
        }

        .notification-header {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .notification-header i {
            margin-right: 10px;
            font-size: 20px;
        }

        /* Trade Line Preview Indicator */
        .line-preview {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            color: white;
            z-index: 20;
            display: none;
        }

        .line-preview.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo">
                <i class="fas fa-robot"></i>Trade <span>XM</span>
            </a>
            <div class="header-right">
                <span class="demo-balance-display" id="demoBalanceDisplay">
                    <i class="fas fa-wallet"></i> $<span id="demoBalance">10,000.00</span>
                </span>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <ul class="nav-links" id="navLinks">
                    <li><a href="#platform">Trading</a></li>
                    <li><a href="#market">Market</a></li>
                    <li><a href="#signals">Signals</a></li>
                    <li><a href="#history">History</a></li>
                    <li><a href="#" class="btn btn-success" id="depositBtn"><i class="fas fa-plus-circle"></i> Deposit</a></li>
                </ul>
            </div>
        </div>
    </header>

    <!-- Trading Platform -->
    <div class="platform-container" id="platform">
        <!-- Left Panel - Market Watch -->
        <div class="market-watch">
            <h3><i class="fas fa-chart-line"></i> Market Watch</h3>
            <ul class="market-list" id="marketList">
                <!-- Market items will be populated by JavaScript -->
            </ul>
        </div>

        <!-- Center Panel - Trading Chart -->
        <div class="trading-chart">
            <div class="chart-header">
                <div class="selected-pair">
                    <div class="pair-name" id="selectedPair">EUR/USD</div>
                    <div class="price-display" id="currentPrice">1.08542</div>
                </div>
                <div class="timeframe-selector">
                    <button class="timeframe-btn active" data-timeframe="1">1M</button>
                    <button class="timeframe-btn" data-timeframe="5">5M</button>
                    <button class="timeframe-btn" data-timeframe="15">15M</button>
                    <button class="timeframe-btn" data-timeframe="60">1H</button>
                    <button class="timeframe-btn" data-timeframe="240">4H</button>
                    <button class="timeframe-btn" data-timeframe="1440">1D</button>
                </div>
            </div>
            
            <div class="chart-container">
                <!-- Trade Line Preview Indicator -->
                <div class="line-preview" id="linePreview">
                    <i class="fas fa-info-circle"></i> Hover over BUY/SELL buttons to preview levels
                </div>
                
                <!-- Chart Overlay for Trade Lines -->
                <div class="chart-overlay" id="chartOverlay">
                    <!-- Trade lines will be drawn here by JavaScript -->
                </div>
                
                <canvas id="tradingChart"></canvas>
            </div>
            
            <div class="chart-footer">
                <div class="chart-stats">
                    <div class="stat">
                        <span class="stat-label">High:</span>
                        <span class="stat-value" id="dayHigh">1.08720</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Low:</span>
                        <span class="stat-value" id="dayLow">1.08410</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Change:</span>
                        <span class="stat-value positive" id="dailyChange">+0.0021 (+0.19%)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Trading Terminal -->
        <div class="trading-terminal">
            <div class="account-info">
                <div class="account-type">DEMO ACCOUNT</div>
                <div class="account-balance" id="accountBalance">$10,000.00</div>
                <div class="account-equity">Equity: $10,235.60</div>
            </div>
            
            <div class="trade-form">
                <h4><i class="fas fa-trade-federation"></i> Place Order</h4>
                
                <div class="form-group">
                    <label for="tradeVolume">Volume (Lots)</label>
                    <input type="range" id="tradeVolume" min="0.01" max="10" step="0.01" value="0.1" class="form-control">
                    <div class="volume-display">
                        <span id="volumeValue">0.1</span> lots ($<span id="volumeCost">13.00</span> per trade)
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="stopLoss">Stop Loss (pips)</label>
                        <input type="number" id="stopLoss" value="20" min="5" max="200" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="takeProfit">Take Profit (pips)</label>
                        <input type="number" id="takeProfit" value="40" min="10" max="500" class="form-control">
                    </div>
                </div>
                
                <div class="trade-buttons">
                    <button class="btn btn-success" id="buyBtn">
                        <i class="fas fa-arrow-up"></i> BUY
                    </button>
                    <button class="btn btn-danger" id="sellBtn">
                        <i class="fas fa-arrow-down"></i> SELL
                    </button>
                </div>
            </div>
            
            <div class="quick-actions">
                <h4><i class="fas fa-bolt"></i> Quick Actions</h4>
                <div class="action-buttons">
                    <button class="action-btn" id="closeAllBtn">
                        <i class="fas fa-times-circle"></i> Close All
                    </button>
                    <button class="action-btn" id="hedgeBtn">
                        <i class="fas fa-balance-scale"></i> Hedge
                    </button>
                    <button class="action-btn" id="reverseBtn">
                        <i class="fas fa-exchange-alt"></i> Reverse
                    </button>
                    <button class="action-btn" id="demoResetBtn">
                        <i class="fas fa-redo"></i> Reset Demo
                    </button>
                </div>
            </div>
            
            <div class="open-positions">
                <div class="positions-header">
                    <h4><i class="fas fa-chart-bar"></i> Open Positions</h4>
                    <span class="positions-count" id="positionsCount">0 positions</span>
                </div>
                <ul class="positions-list" id="positionsList">
                    <!-- Positions will be populated by JavaScript -->
                </ul>
            </div>
        </div>
    </div>

    <!-- Price Ticker -->
    <div class="price-ticker">
        <div class="ticker-container" id="tickerContainer">
            <!-- Ticker items will be populated by JavaScript -->
        </div>
    </div>

    <!-- Order Confirmation Modal -->
    <div class="modal" id="orderModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <div class="order-confirmation">
                <div class="order-icon success" id="orderIcon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 id="orderTitle">Order Executed Successfully!</h2>
                <div class="order-details" id="orderDetails">
                    <!-- Order details will be populated by JavaScript -->
                </div>
                <button class="btn" id="closeOrderModal">Continue Trading</button>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification" id="notification">
        <div class="notification-header">
            <i class="fas fa-info-circle"></i>
            <strong id="notificationTitle">Notification</strong>
        </div>
        <div id="notificationMessage">This is a notification message.</div>
    </div>

    <script>
        // Initialize Trading Platform
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile Menu Toggle
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.getElementById('navLinks').classList.toggle('active');
            });

            // Close mobile menu when clicking on a link
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', () => {
                    document.getElementById('navLinks').classList.remove('active');
                });
            });

            // Initialize Trading Platform
            initializeTradingPlatform();
        });

        // Trading Platform State
        let tradingState = {
            balance: 10000.00,
            demoBalance: 10000.00,
            selectedPair: 'EUR/USD',
            currentPrice: 1.08542,
            positions: [],
            chart: null,
            timeframe: '1',
            marketData: {},
            tickerSpeed: 30,
            tradeCostPerLot: 130.00,
            pendingTradeLines: null,
            isDrawingLines: false,
            lineTimeout: null
        };

        // Market Data
        const currencyPairs = [
            { symbol: 'EUR/USD', name: 'Euro vs US Dollar', price: 1.08542, change: 0.0021, changePercent: 0.19, high: 1.08720, low: 1.08410 },
            { symbol: 'GBP/USD', name: 'British Pound vs US Dollar', price: 1.26580, change: -0.0015, changePercent: -0.12, high: 1.26890, low: 1.26320 },
            { symbol: 'USD/JPY', name: 'US Dollar vs Japanese Yen', price: 147.325, change: 0.452, changePercent: 0.31, high: 147.890, low: 146.950 },
            { symbol: 'USD/CAD', name: 'US Dollar vs Canadian Dollar', price: 1.35420, change: -0.0018, changePercent: -0.13, high: 1.35780, low: 1.35210 },
            { symbol: 'AUD/USD', name: 'Australian Dollar vs US Dollar', price: 0.65780, change: 0.0012, changePercent: 0.18, high: 0.65920, low: 0.65560 },
            { symbol: 'XAU/USD', name: 'Gold vs US Dollar', price: 1984.50, change: 12.80, changePercent: 0.65, high: 1992.30, low: 1975.80 },
            { symbol: 'BTC/USD', name: 'Bitcoin vs US Dollar', price: 43520.00, change: 1250.00, changePercent: 2.96, high: 43890.00, low: 42850.00 },
            { symbol: 'ETH/USD', name: 'Ethereum vs US Dollar', price: 2350.00, change: 45.00, changePercent: 1.95, high: 2380.00, low: 2310.00 }
        ];

        // Initialize Trading Platform
        function initializeTradingPlatform() {
            // Initialize market data
            initializeMarketData();
            
            // Initialize chart
            initializeChart();
            
            // Initialize market watch
            populateMarketWatch();
            
            // Initialize ticker
            populateTicker();
            
            // Set up event listeners
            setupEventListeners();
            
            // Start price updates
            startPriceUpdates();
            
            // Start position updates
            startPositionUpdates();
            
            // Show line preview indicator
            showLinePreview();
        }

        // Initialize Market Data
        function initializeMarketData() {
            currencyPairs.forEach(pair => {
                tradingState.marketData[pair.symbol] = { ...pair };
            });
        }

        // Populate Market Watch
        function populateMarketWatch() {
            const marketList = document.getElementById('marketList');
            marketList.innerHTML = '';
            
            currencyPairs.forEach(pair => {
                const isActive = pair.symbol === tradingState.selectedPair;
                const changeClass = pair.change >= 0 ? 'positive' : 'negative';
                const changeSign = pair.change >= 0 ? '+' : '';
                
                const listItem = document.createElement('li');
                listItem.className = `market-item ${isActive ? 'active' : ''}`;
                listItem.dataset.symbol = pair.symbol;
                listItem.innerHTML = `
                    <div class="pair-info">
                        <div class="pair-name">${pair.symbol}</div>
                        <div class="pair-description">${pair.name}</div>
                    </div>
                    <div class="pair-price">
                        <div class="current-price">${formatPrice(pair.symbol, pair.price)}</div>
                        <div class="price-change ${changeClass}">
                            ${changeSign}${formatChange(pair.symbol, pair.change)}
                        </div>
                    </div>
                `;
                
                listItem.addEventListener('click', () => selectPair(pair.symbol));
                marketList.appendChild(listItem);
            });
        }

        // Populate Ticker
        function populateTicker() {
            const tickerContainer = document.getElementById('tickerContainer');
            tickerContainer.innerHTML = '';
            
            // Create two copies for seamless looping
            for (let i = 0; i < 2; i++) {
                currencyPairs.forEach(pair => {
                    const changeClass = pair.change >= 0 ? 'positive' : 'negative';
                    const changeSign = pair.change >= 0 ? '+' : '';
                    
                    const tickerItem = document.createElement('div');
                    tickerItem.className = 'ticker-item';
                    tickerItem.innerHTML = `
                        <div class="ticker-pair">${pair.symbol}</div>
                        <div class="ticker-price">${formatPrice(pair.symbol, pair.price)}</div>
                        <div class="ticker-change ${changeClass}">
                            ${changeSign}${formatChange(pair.symbol, pair.change)}
                        </div>
                    `;
                    
                    tickerContainer.appendChild(tickerItem);
                });
            }
        }

        // Select Currency Pair
        function selectPair(symbol) {
            // Remove any existing trade lines
            removeTradeLines();
            
            tradingState.selectedPair = symbol;
            const pair = tradingState.marketData[symbol];
            
            // Update UI
            document.getElementById('selectedPair').textContent = symbol;
            document.getElementById('currentPrice').textContent = formatPrice(symbol, pair.price);
            document.getElementById('dayHigh').textContent = formatPrice(symbol, pair.high);
            document.getElementById('dayLow').textContent = formatPrice(symbol, pair.low);
            
            const changeClass = pair.change >= 0 ? 'positive' : 'negative';
            const changeSign = pair.change >= 0 ? '+' : '';
            document.getElementById('dailyChange').textContent = 
                `${changeSign}${formatChange(symbol, pair.change)} (${changeSign}${pair.changePercent}%)`;
            document.getElementById('dailyChange').className = `stat-value ${changeClass}`;
            
            // Update active state in market watch
            document.querySelectorAll('.market-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.symbol === symbol) {
                    item.classList.add('active');
                }
            });
            
            // Update chart
            updateChartData();
            
            // Show notification
            showNotification('info', 'Pair Selected', `Switched to ${symbol}`);
        }

        // Initialize Chart
        function initializeChart() {
            const ctx = document.getElementById('tradingChart').getContext('2d');
            
            // Create gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, 'rgba(0, 212, 255, 0.3)');
            gradient.addColorStop(1, 'rgba(0, 212, 255, 0)');
            
            tradingState.chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: generateTimeLabels(50),
                    datasets: [{
                        label: tradingState.selectedPair,
                        data: generatePriceData(50, tradingState.marketData[tradingState.selectedPair].price),
                        borderColor: '#00d4ff',
                        backgroundColor: gradient,
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 0
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(20, 25, 40, 0.9)',
                            titleColor: '#00d4ff',
                            bodyColor: 'white',
                            borderColor: '#00d4ff',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.6)'
                            }
                        },
                        y: {
                            position: 'right',
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.6)',
                                callback: function(value) {
                                    return formatPrice(tradingState.selectedPair, value);
                                }
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        // Update Chart Data
        function updateChartData() {
            const pair = tradingState.marketData[tradingState.selectedPair];
            
            tradingState.chart.data.labels = generateTimeLabels(50);
            tradingState.chart.data.datasets[0].data = generatePriceData(50, pair.price);
            tradingState.chart.data.datasets[0].label = tradingState.selectedPair;
            tradingState.chart.options.scales.y.ticks.callback = function(value) {
                return formatPrice(tradingState.selectedPair, value);
            };
            
            tradingState.chart.update('none');
        }

        // Generate Time Labels
        function generateTimeLabels(count) {
            const labels = [];
            const now = new Date();
            
            for (let i = count - 1; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60000 * parseInt(tradingState.timeframe));
                labels.push(time.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));
            }
            
            return labels;
        }

        // Generate Price Data
        function generatePriceData(count, basePrice) {
            const data = [basePrice];
            let currentPrice = basePrice;
            const volatility = getPairVolatility(tradingState.selectedPair);
            
            for (let i = 1; i < count; i++) {
                // Simulate price movement
                const change = (Math.random() - 0.5) * volatility;
                currentPrice += change;
                
                // Ensure price stays within daily range
                const pair = tradingState.marketData[tradingState.selectedPair];
                currentPrice = Math.max(pair.low, Math.min(pair.high, currentPrice));
                
                data.push(currentPrice);
            }
            
            return data;
        }

        // Get Pair Volatility
        function getPairVolatility(symbol) {
            const volatilities = {
                'EUR/USD': 0.0003,
                'GBP/USD': 0.0004,
                'USD/JPY': 0.05,
                'USD/CAD': 0.00035,
                'AUD/USD': 0.0004,
                'XAU/USD': 1.5,
                'BTC/USD': 150,
                'ETH/USD': 8
            };
            
            return volatilities[symbol] || 0.0005;
        }

        // Format Price
        function formatPrice(symbol, price) {
            if (symbol.includes('JPY')) {
                return price.toFixed(2);
            } else if (symbol.includes('XAU') || symbol.includes('BTC') || symbol.includes('ETH')) {
                return price.toFixed(2);
            } else {
                return price.toFixed(5);
            }
        }

        // Format Change
        function formatChange(symbol, change) {
            if (symbol.includes('JPY')) {
                return change.toFixed(2);
            } else if (symbol.includes('XAU') || symbol.includes('BTC') || symbol.includes('ETH')) {
                return change.toFixed(2);
            } else {
                return change.toFixed(5);
            }
        }

        // Draw Trade Lines on Chart
        function drawTradeLines(entryPrice, slPrice, tpPrice, tradeType) {
            // Clear any existing lines first
            removeTradeLines();
            
            const chartOverlay = document.getElementById('chartOverlay');
            const chartCanvas = document.getElementById('tradingChart');
            const chartRect = chartCanvas.getBoundingClientRect();
            
            // Get chart y-scale range
            const chart = tradingState.chart;
            const yScale = chart.scales.y;
            const chartMin = yScale.min;
            const chartMax = yScale.max;
            
            // Calculate vertical positions
            const getYPosition = (price) => {
                const pricePercentage = (price - chartMin) / (chartMax - chartMin);
                return chartRect.height * (1 - pricePercentage);
            };
            
            // Create lines
            const lines = [
                { price: entryPrice, type: 'entry', label: 'ENTRY', color: tradeType === 'buy' ? '#00ff88' : '#ff3366' },
                { price: slPrice, type: 'sl', label: 'STOP LOSS', color: '#ff3366' },
                { price: tpPrice, type: 'tp', label: 'TAKE PROFIT', color: '#00d4ff' }
            ];
            
            lines.forEach(line => {
                const yPosition = getYPosition(line.price);
                
                // Create line element
                const lineElement = document.createElement('div');
                lineElement.className = `trade-line ${line.type}`;
                lineElement.style.top = `${yPosition}px`;
                lineElement.style.borderBottomColor = line.color;
                
                // Create label
                const labelElement = document.createElement('div');
                labelElement.className = `line-label ${line.type}`;
                labelElement.style.top = `${yPosition}px`;
                labelElement.textContent = `${line.label}: ${formatPrice(tradingState.selectedPair, line.price)}`;
                labelElement.style.backgroundColor = line.color + 'B3';
                
                chartOverlay.appendChild(lineElement);
                chartOverlay.appendChild(labelElement);
            });
            
            // Store line data for updates
            tradingState.pendingTradeLines = {
                entryPrice,
                slPrice,
                tpPrice,
                tradeType,
                lines: lines
            };
            
            tradingState.isDrawingLines = true;
        }

        // Remove Trade Lines
        function removeTradeLines() {
            const chartOverlay = document.getElementById('chartOverlay');
            chartOverlay.innerHTML = '';
            tradingState.pendingTradeLines = null;
            tradingState.isDrawingLines = false;
            
            // Hide preview indicator
            document.getElementById('linePreview').classList.remove('active');
        }

        // Update Trade Lines Position
        function updateTradeLinesPosition() {
            if (!tradingState.pendingTradeLines || !tradingState.isDrawingLines) return;
            
            // Redraw lines with current positions
            const { entryPrice, slPrice, tpPrice, tradeType } = tradingState.pendingTradeLines;
            drawTradeLines(entryPrice, slPrice, tpPrice, tradeType);
        }

        // Show Line Preview Indicator
        function showLinePreview() {
            const linePreview = document.getElementById('linePreview');
            linePreview.classList.add('active');
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                linePreview.classList.remove('active');
            }, 5000);
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Timeframe buttons
            document.querySelectorAll('.timeframe-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.timeframe-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    tradingState.timeframe = this.dataset.timeframe;
                    updateChartData();
                    updateTradeLinesPosition();
                });
            });

            // Trade volume slider
            const volumeSlider = document.getElementById('tradeVolume');
            const volumeValue = document.getElementById('volumeValue');
            const volumeCost = document.getElementById('volumeCost');
            
            volumeSlider.addEventListener('input', function() {
                const volume = parseFloat(this.value);
                const cost = (volume * tradingState.tradeCostPerLot).toFixed(2);
                
                volumeValue.textContent = volume.toFixed(2);
                volumeCost.textContent = cost;
                
                // Update trade cost display
                document.querySelector('.volume-display').innerHTML = `
                    <span id="volumeValue">${volume.toFixed(2)}</span> lots ($${cost} per trade)
                `;
                
                // Update lines if they're being shown
                if (tradingState.isDrawingLines) {
                    updateTradePreview();
                }
            });

            // Stop Loss and Take Profit inputs
            document.getElementById('stopLoss').addEventListener('input', function() {
                if (tradingState.isDrawingLines) {
                    updateTradePreview();
                }
            });
            
            document.getElementById('takeProfit').addEventListener('input', function() {
                if (tradingState.isDrawingLines) {
                    updateTradePreview();
                }
            });

            // Buy button with hover preview
            const buyBtn = document.getElementById('buyBtn');
            buyBtn.addEventListener('mouseenter', () => {
                showTradePreview('buy');
                document.getElementById('linePreview').classList.add('active');
            });
            
            buyBtn.addEventListener('mouseleave', () => {
                if (!tradingState.isDrawingLines || (tradingState.pendingTradeLines && tradingState.pendingTradeLines.tradeType !== 'buy')) {
                    removeTradeLines();
                }
                document.getElementById('linePreview').classList.remove('active');
            });
            
            buyBtn.addEventListener('click', () => {
                executeTrade('buy');
            });

            // Sell button with hover preview
            const sellBtn = document.getElementById('sellBtn');
            sellBtn.addEventListener('mouseenter', () => {
                showTradePreview('sell');
                document.getElementById('linePreview').classList.add('active');
            });
            
            sellBtn.addEventListener('mouseleave', () => {
                if (!tradingState.isDrawingLines || (tradingState.pendingTradeLines && tradingState.pendingTradeLines.tradeType !== 'sell')) {
                    removeTradeLines();
                }
                document.getElementById('linePreview').classList.remove('active');
            });
            
            sellBtn.addEventListener('click', () => {
                executeTrade('sell');
            });

            // Quick action buttons
            document.getElementById('closeAllBtn').addEventListener('click', closeAllPositions);
            document.getElementById('hedgeBtn').addEventListener('click', hedgePosition);
            document.getElementById('reverseBtn').addEventListener('click', reversePosition);
            document.getElementById('demoResetBtn').addEventListener('click', resetDemoAccount);

            // Deposit button
            document.getElementById('depositBtn').addEventListener('click', showDepositModal);

            // Modal close buttons
            document.getElementById('closeModal').addEventListener('click', closeModal);
            document.getElementById('closeOrderModal').addEventListener('click', closeModal);
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                const modal = document.getElementById('orderModal');
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Window resize - update line positions
            window.addEventListener('resize', () => {
                if (tradingState.isDrawingLines) {
                    setTimeout(updateTradeLinesPosition, 100);
                }
            });
        }

        // Show Trade Preview
        function showTradePreview(type) {
            const volume = parseFloat(document.getElementById('tradeVolume').value);
            const stopLoss = parseInt(document.getElementById('stopLoss').value);
            const takeProfit = parseInt(document.getElementById('takeProfit').value);
            const pair = tradingState.selectedPair;
            const price = tradingState.marketData[pair].price;
            
            // Calculate stop loss and take profit prices
            let slPrice, tpPrice;
            const pipValue = getPipValue(pair);
            
            if (type === 'buy') {
                slPrice = price - (stopLoss * pipValue);
                tpPrice = price + (takeProfit * pipValue);
            } else {
                slPrice = price + (stopLoss * pipValue);
                tpPrice = price - (takeProfit * pipValue);
            }
            
            // Draw the lines on chart
            drawTradeLines(price, slPrice, tpPrice, type);
        }

        // Update Trade Preview
        function updateTradePreview() {
            if (!tradingState.pendingTradeLines) return;
            
            const type = tradingState.pendingTradeLines.tradeType;
            showTradePreview(type);
        }

        // Get Pip Value for Currency Pair
        function getPipValue(symbol) {
            if (symbol.includes('JPY')) {
                return 0.01; // For JPY pairs, pip is 0.01
            } else {
                return 0.0001; // For other pairs, pip is 0.0001
            }
        }

        // Execute Trade
        function executeTrade(type) {
            const volume = parseFloat(document.getElementById('tradeVolume').value);
            const stopLoss = parseInt(document.getElementById('stopLoss').value);
            const takeProfit = parseInt(document.getElementById('takeProfit').value);
            const pair = tradingState.selectedPair;
            const price = tradingState.marketData[pair].price;
            
            // Calculate stop loss and take profit prices
            let slPrice, tpPrice;
            const pipValue = getPipValue(pair);
            
            if (type === 'buy') {
                slPrice = price - (stopLoss * pipValue);
                tpPrice = price + (takeProfit * pipValue);
            } else {
                slPrice = price + (stopLoss * pipValue);
                tpPrice = price - (takeProfit * pipValue);
            }
            
            // Calculate trade cost
            const tradeCost = volume * tradingState.tradeCostPerLot;
            
            // Check balance
            if (tradeCost > tradingState.balance) {
                showNotification('error', 'Insufficient Funds', `You need $${tradeCost.toFixed(2)} but only have $${tradingState.balance.toFixed(2)}`);
                // Remove lines if insufficient funds
                removeTradeLines();
                return;
            }
            
            // Deduct trade cost
            tradingState.balance -= tradeCost;
            updateBalance();
            
            // Create position
            const position = {
                id: Date.now(),
                pair: pair,
                type: type,
                volume: volume,
                entryPrice: price,
                stopLoss: slPrice,
                takeProfit: tpPrice,
                timestamp: new Date(),
                pl: 0.00
            };
            
            // Add to positions
            tradingState.positions.push(position);
            updatePositions();
            
            // Show order confirmation
            showOrderConfirmation(type, pair, volume, price, tradeCost, slPrice, tpPrice);
            
            // Show notification
            showNotification('success', 'Order Executed', 
                `${type.toUpperCase()} ${volume} lots ${pair} at ${formatPrice(pair, price)}`
            );
            
            // Remove trade lines after execution
            setTimeout(removeTradeLines, 1000);
        }

        // Close All Positions
        function closeAllPositions() {
            if (tradingState.positions.length === 0) {
                showNotification('info', 'No Positions', 'You have no open positions to close');
                return;
            }
            
            const totalPL = tradingState.positions.reduce((sum, pos) => sum + pos.pl, 0);
            
            // Add P/L to balance
            tradingState.balance += totalPL;
            updateBalance();
            
            // Clear positions
            tradingState.positions = [];
            updatePositions();
            
            // Show notification
            showNotification('success', 'All Positions Closed', 
                `Closed ${tradingState.positions.length} positions. Total P/L: $${totalPL.toFixed(2)}`
            );
        }

        // Hedge Position
        function hedgePosition() {
            const activePositions = tradingState.positions.filter(p => p.pair === tradingState.selectedPair);
            
            if (activePositions.length === 0) {
                showNotification('info', 'No Position', `No open position for ${tradingState.selectedPair}`);
                return;
            }
            
            // Execute opposite trade
            const lastPosition = activePositions[activePositions.length - 1];
            const oppositeType = lastPosition.type === 'buy' ? 'sell' : 'buy';
            
            executeTrade(oppositeType);
            
            showNotification('info', 'Position Hedged', 
                `Hedged ${lastPosition.type} position with ${oppositeType} order`
            );
        }

        // Reverse Position
        function reversePosition() {
            const activePositions = tradingState.positions.filter(p => p.pair === tradingState.selectedPair);
            
            if (activePositions.length === 0) {
                showNotification('info', 'No Position', `No open position for ${tradingState.selectedPair}`);
                return;
            }
            
            // Close existing position
            const lastPosition = activePositions[activePositions.length - 1];
            tradingState.balance += lastPosition.pl;
            tradingState.positions = tradingState.positions.filter(p => p.id !== lastPosition.id);
            
            // Execute opposite trade
            const oppositeType = lastPosition.type === 'buy' ? 'sell' : 'buy';
            executeTrade(oppositeType);
            
            showNotification('info', 'Position Reversed', 
                `Reversed ${lastPosition.type} position to ${oppositeType}`
            );
        }

        // Reset Demo Account
        function resetDemoAccount() {
            if (confirm('Are you sure you want to reset your demo account? All positions will be closed and balance reset to $10,000.')) {
                tradingState.balance = 10000.00;
                tradingState.demoBalance = 10000.00;
                tradingState.positions = [];
                
                updateBalance();
                updatePositions();
                
                // Remove any trade lines
                removeTradeLines();
                
                showNotification('success', 'Account Reset', 'Demo account reset to $10,000');
            }
        }

        // Update Balance Display
        function updateBalance() {
            document.getElementById('demoBalance').textContent = tradingState.balance.toFixed(2);
            document.getElementById('accountBalance').textContent = `$${tradingState.balance.toFixed(2)}`;
        }

        // Update Positions Display
        function updatePositions() {
            const positionsList = document.getElementById('positionsList');
            const positionsCount = document.getElementById('positionsCount');
            
            positionsList.innerHTML = '';
            positionsCount.textContent = `${tradingState.positions.length} position${tradingState.positions.length !== 1 ? 's' : ''}`;
            
            tradingState.positions.forEach(position => {
                const positionItem = document.createElement('li');
                positionItem.className = `position-item ${position.type}`;
                positionItem.innerHTML = `
                    <div class="position-pair">${position.pair}</div>
                    <div class="position-type ${position.type}">${position.type.toUpperCase()}</div>
                    <div class="position-pl ${position.pl >= 0 ? 'profit' : 'loss'}">
                        ${position.pl >= 0 ? '+' : ''}$${position.pl.toFixed(2)}
                    </div>
                `;
                
                positionsList.appendChild(positionItem);
            });
        }

        // Show Order Confirmation
        function showOrderConfirmation(type, pair, volume, price, cost, slPrice, tpPrice) {
            const modal = document.getElementById('orderModal');
            const orderIcon = document.getElementById('orderIcon');
            const orderTitle = document.getElementById('orderTitle');
            const orderDetails = document.getElementById('orderDetails');
            
            // Set icon and title
            orderIcon.className = `order-icon success`;
            orderIcon.innerHTML = '<i class="fas fa-check-circle"></i>';
            orderTitle.textContent = 'Order Executed Successfully!';
            
            // Set details
            orderDetails.innerHTML = `
                <div class="detail-row">
                    <span>Order Type:</span>
                    <span style="color: ${type === 'buy' ? '#00ff88' : '#ff3366'}; font-weight: 600;">
                        ${type.toUpperCase()}
                    </span>
                </div>
                <div class="detail-row">
                    <span>Currency Pair:</span>
                    <span>${pair}</span>
                </div>
                <div class="detail-row">
                    <span>Volume:</span>
                    <span>${volume.toFixed(2)} lots</span>
                </div>
                <div class="detail-row">
                    <span>Entry Price:</span>
                    <span>${formatPrice(pair, price)}</span>
                </div>
                <div class="detail-row">
                    <span>Stop Loss:</span>
                    <span style="color: #ff3366;">${formatPrice(pair, slPrice)}</span>
                </div>
                <div class="detail-row">
                    <span>Take Profit:</span>
                    <span style="color: #00d4ff;">${formatPrice(pair, tpPrice)}</span>
                </div>
                <div class="detail-row">
                    <span>Trade Cost:</span>
                    <span>$${cost.toFixed(2)}</span>
                </div>
                <div class="detail-row">
                    <span>New Balance:</span>
                    <span>$${tradingState.balance.toFixed(2)}</span>
                </div>
                <div class="detail-row">
                    <span>Timestamp:</span>
                    <span>${new Date().toLocaleTimeString()}</span>
                </div>
            `;
            
            modal.style.display = 'flex';
        }

        // Show Deposit Modal
        function showDepositModal() {
            // For now, just add $1000 to demo
            tradingState.balance += 1000;
            updateBalance();
            
            showNotification('success', 'Funds Added', '$1,000 added to your demo account');
        }

        // Close Modal
        function closeModal() {
            document.getElementById('orderModal').style.display = 'none';
        }

        // Show Notification
        function showNotification(type, title, message) {
            const notification = document.getElementById('notification');
            const notificationTitle = document.getElementById('notificationTitle');
            const notificationMessage = document.getElementById('notificationMessage');
            
            // Set notification content
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            // Set notification type
            notification.className = `notification ${type} show`;
            
            // Set icon based on type
            const icon = notification.querySelector('i');
            if (type === 'success') {
                icon.className = 'fas fa-check-circle';
            } else if (type === 'error') {
                icon.className = 'fas fa-exclamation-circle';
            } else {
                icon.className = 'fas fa-info-circle';
            }
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        // Start Price Updates
        function startPriceUpdates() {
            setInterval(() => {
                // Update all prices
                Object.keys(tradingState.marketData).forEach(symbol => {
                    const pair = tradingState.marketData[symbol];
                    const volatility = getPairVolatility(symbol);
                    
                    // Simulate price movement
                    const change = (Math.random() - 0.5) * volatility * 2;
                    pair.price += change;
                    
                    // Update change
                    const basePrice = pair.symbol.includes('JPY') ? 147.0 : 
                                    pair.symbol.includes('XAU') ? 1980.0 : 
                                    pair.symbol.includes('BTC') ? 43000.0 : 
                                    pair.symbol.includes('ETH') ? 2300.0 : 1.0;
                    
                    pair.change = pair.price - basePrice;
                    pair.changePercent = (pair.change / basePrice * 100).toFixed(2);
                    
                    // Keep within daily range
                    pair.price = Math.max(pair.low, Math.min(pair.high, pair.price));
                });
                
                // Update current pair display
                const currentPair = tradingState.marketData[tradingState.selectedPair];
                if (currentPair) {
                    document.getElementById('currentPrice').textContent = formatPrice(tradingState.selectedPair, currentPair.price);
                    
                    // Update chart with new price
                    const chartData = tradingState.chart.data.datasets[0].data;
                    chartData.push(currentPair.price);
                    chartData.shift();
                    
                    // Update time labels
                    const labels = tradingState.chart.data.labels;
                    const now = new Date();
                    labels.push(now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));
                    labels.shift();
                    
                    tradingState.chart.update('none');
                    
                    // Update trade lines position if they exist
                    if (tradingState.isDrawingLines) {
                        updateTradeLinesPosition();
                    }
                }
                
                // Update market watch
                updateMarketWatch();
                
                // Update ticker
                updateTicker();
                
                // Update positions P/L
                updatePositionsPL();
                
            }, 2000); // Update every 2 seconds
        }

        // Start Position Updates
        function startPositionUpdates() {
            setInterval(() => {
                updatePositionsPL();
            }, 1000); // Update P/L every second
        }

        // Update Market Watch
        function updateMarketWatch() {
            document.querySelectorAll('.market-item').forEach(item => {
                const symbol = item.dataset.symbol;
                const pair = tradingState.marketData[symbol];
                
                if (pair) {
                    const priceElement = item.querySelector('.current-price');
                    const changeElement = item.querySelector('.price-change');
                    
                    priceElement.textContent = formatPrice(symbol, pair.price);
                    
                    const changeClass = pair.change >= 0 ? 'positive' : 'negative';
                    const changeSign = pair.change >= 0 ? '+' : '';
                    
                    changeElement.textContent = `${changeSign}${formatChange(symbol, pair.change)}`;
                    changeElement.className = `price-change ${changeClass}`;
                }
            });
        }

        // Update Ticker
        function updateTicker() {
            document.querySelectorAll('.ticker-item').forEach((item, index) => {
                const symbolIndex = index % currencyPairs.length;
                const symbol = currencyPairs[symbolIndex].symbol;
                const pair = tradingState.marketData[symbol];
                
                if (pair) {
                    const priceElement = item.querySelector('.ticker-price');
                    const changeElement = item.querySelector('.ticker-change');
                    
                    priceElement.textContent = formatPrice(symbol, pair.price);
                    
                    const changeClass = pair.change >= 0 ? 'positive' : 'negative';
                    const changeSign = pair.change >= 0 ? '+' : '';
                    
                    changeElement.textContent = `${changeSign}${formatChange(symbol, pair.change)}`;
                    changeElement.className = `ticker-change ${changeClass}`;
                }
            });
        }

        // Update Positions P/L
        function updatePositionsPL() {
            tradingState.positions.forEach(position => {
                const currentPrice = tradingState.marketData[position.pair].price;
                const priceDiff = currentPrice - position.entryPrice;
                
                if (position.type === 'buy') {
                    position.pl = priceDiff * position.volume * 100000; // Simplified P/L calculation
                } else {
                    position.pl = -priceDiff * position.volume * 100000;
                }
                
                // Check stop loss and take profit
                if ((position.type === 'buy' && currentPrice <= position.stopLoss) ||
                    (position.type === 'sell' && currentPrice >= position.stopLoss)) {
                    // Stop loss triggered
                    closePosition(position.id, 'stop loss');
                } else if ((position.type === 'buy' && currentPrice >= position.takeProfit) ||
                         (position.type === 'sell' && currentPrice <= position.takeProfit)) {
                    // Take profit triggered
                    closePosition(position.id, 'take profit');
                }
            });
            
            updatePositions();
        }

        // Close Position
        function closePosition(positionId, reason) {
            const positionIndex = tradingState.positions.findIndex(p => p.id === positionId);
            
            if (positionIndex !== -1) {
                const position = tradingState.positions[positionIndex];
                
                // Add P/L to balance
                tradingState.balance += position.pl;
                updateBalance();
                
                // Remove position
                tradingState.positions.splice(positionIndex, 1);
                updatePositions();
                
                // Show notification
                showNotification('info', 'Position Closed', 
                    `${position.type.toUpperCase()} ${position.pair} closed by ${reason}. P/L: $${position.pl.toFixed(2)}`
                );
            }
        }

        // Initialize on load
        initializeTradingPlatform();
    </script>
</body>
</html>
